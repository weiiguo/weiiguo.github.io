<nav class="site-nav">
  <div class="nav-container">
    <div class="nav-logo">
      <a href="{{ '/' | relative_url }}">
        <img src="{{ '/assets/img/UST.png' | relative_url }}" alt="UST Logo" class="nav-logo-img">
      </a>
    </div>
    <div class="nav-toggle" id="navToggle">
      <span></span>
      <span></span>
      <span></span>
    </div>
    <ul class="nav-links" id="navLinks">
      {% for item in site.data.navigation.main %}
        <li class="nav-item">
          <a href="{{ item.url | relative_url }}" class="nav-link{% if page.url == item.url %} active{% endif %}">{{ item.name }}</a>
        </li>
      {% endfor %}
    </ul>
  </div>
</nav>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const navToggle = document.getElementById('navToggle');
    const navLinks = document.getElementById('navLinks');
    
    // 确保汉堡菜单按钮正常工作
    navToggle.addEventListener('click', function(e) {
      e.preventDefault();
      navLinks.classList.toggle('show');
      navToggle.classList.toggle('active');
      
      // 添加强制重绘代码，确保所有菜单项立即显示
      if (navLinks.classList.contains('show')) {
        // 强制浏览器重新计算布局
        navLinks.style.display = 'none';
        setTimeout(function() {
          navLinks.style.display = '';
        }, 10);
      }
    });
    
    // 点击链接后关闭菜单
    const navItems = document.querySelectorAll('.nav-link');
    navItems.forEach(item => {
      item.addEventListener('click', function() {
        if (window.innerWidth <= 768) {
          navLinks.classList.remove('show');
          navToggle.classList.remove('active');
        }
      });
    });
    
    // 确保在窗口调整大小时重置菜单状态
    window.addEventListener('resize', function() {
      if (window.innerWidth > 768) {
        navLinks.classList.remove('show');
        navToggle.classList.remove('active');
      }
    });
  });
</script> 